# Comparing `tmp/orquestra_sdk-0.63.0-py3-none-any.whl.zip` & `tmp/orquestra_sdk-0.64.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,33 +1,32 @@
-Zip file size: 237492 bytes, number of entries: 136
+Zip file size: 238086 bytes, number of entries: 136
 -rw-r--r--  2.0 unx     2051 b- defN 20-Feb-02 00:00 orquestra/sdk/__init__.py
 -rw-r--r--  2.0 unx     2892 b- defN 20-Feb-02 00:00 orquestra/sdk/exceptions.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 orquestra/sdk/py.typed
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/__init__.py
 -rw-r--r--  2.0 unx      204 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/__init__.py
 -rw-r--r--  2.0 unx     8110 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_ast.py
 -rw-r--r--  2.0 unx    16525 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_config.py
--rw-r--r--  2.0 unx    47276 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_dsl.py
+-rw-r--r--  2.0 unx    48260 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_dsl.py
 -rw-r--r--  2.0 unx     2414 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_env.py
 -rw-r--r--  2.0 unx     2683 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_factory.py
 -rw-r--r--  2.0 unx     2085 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_git_url_utils.py
 -rw-r--r--  2.0 unx    14448 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_in_process_runtime.py
 -rw-r--r--  2.0 unx     1504 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_jwt.py
--rw-r--r--  2.0 unx     1404 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_retry.py
 -rw-r--r--  2.0 unx     3678 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_services.py
--rw-r--r--  2.0 unx    32711 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_traversal.py
+-rw-r--r--  2.0 unx    32785 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_traversal.py
 -rw-r--r--  2.0 unx     4616 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_viz.py
--rw-r--r--  2.0 unx    24596 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_workflow.py
+-rw-r--r--  2.0 unx    26626 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_workflow.py
 -rw-r--r--  2.0 unx     6188 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/loader.py
 -rw-r--r--  2.0 unx      878 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_api/__init__.py
 -rw-r--r--  2.0 unx    14647 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_api/_config.py
 -rw-r--r--  2.0 unx    12987 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_api/_task_run.py
 -rw-r--r--  2.0 unx    34562 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_api/_wf_run.py
 -rw-r--r--  2.0 unx      204 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_driver/__init__.py
--rw-r--r--  2.0 unx    30007 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_driver/_ce_runtime.py
+-rw-r--r--  2.0 unx    30008 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_driver/_ce_runtime.py
 -rw-r--r--  2.0 unx    51919 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_driver/_client.py
 -rw-r--r--  2.0 unx     6062 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_driver/_exceptions.py
 -rw-r--r--  2.0 unx    17720 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_driver/_models.py
 -rw-r--r--  2.0 unx      204 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_spaces/__init__.py
 -rw-r--r--  2.0 unx     2786 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_spaces/_api.py
 -rw-r--r--  2.0 unx     2385 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_spaces/_resolver.py
 -rw-r--r--  2.0 unx      204 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/_base/_testing/__init__.py
@@ -73,27 +72,28 @@
 -rw-r--r--  2.0 unx     8350 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/secrets/_client.py
 -rw-r--r--  2.0 unx     1249 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/secrets/_exceptions.py
 -rw-r--r--  2.0 unx     1782 b- defN 20-Feb-02 00:00 orquestra/sdk/_client/secrets/_models.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 orquestra/sdk/_ray/__init__.py
 -rw-r--r--  2.0 unx      436 b- defN 20-Feb-02 00:00 orquestra/sdk/_ray/_build_workflow.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/__init__.py
 -rw-r--r--  2.0 unx      204 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/__init__.py
--rw-r--r--  2.0 unx    27980 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_build_workflow.py
--rw-r--r--  2.0 unx     8263 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_client.py
+-rw-r--r--  2.0 unx    28232 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_build_workflow.py
+-rw-r--r--  2.0 unx     8549 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_client.py
 -rw-r--r--  2.0 unx    30785 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_dag.py
 -rw-r--r--  2.0 unx     1458 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_dirs.py
 -rw-r--r--  2.0 unx     1096 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_env.py
 -rw-r--r--  2.0 unx      946 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_id_gen.py
 -rw-r--r--  2.0 unx     9463 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_ray_logs.py
 -rw-r--r--  2.0 unx     1517 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_wf_metadata.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_logs/__init__.py
 -rw-r--r--  2.0 unx     7022 b- defN 20-Feb-02 00:00 orquestra/sdk/_runtime/_ray/_logs/_markers.py
--rw-r--r--  2.0 unx      296 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/__init__.py
+-rw-r--r--  2.0 unx      335 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/__init__.py
 -rw-r--r--  2.0 unx     3845 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/_graphs.py
 -rw-r--r--  2.0 unx     1144 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/_regex.py
+-rw-r--r--  2.0 unx     1404 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/_retry.py
 -rw-r--r--  2.0 unx     8454 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/abc.py
 -rw-r--r--  2.0 unx     4796 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/dispatch.py
 -rw-r--r--  2.0 unx    10212 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/exceptions.py
 -rw-r--r--  2.0 unx     7012 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/serde.py
 -rw-r--r--  2.0 unx      103 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/_spaces/__init__.py
 -rw-r--r--  2.0 unx      692 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/_spaces/_structs.py
 -rw-r--r--  2.0 unx      355 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/dates/__init__.py
@@ -109,15 +109,15 @@
 -rw-r--r--  2.0 unx      383 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/orqdantic/__init__.py
 -rw-r--r--  2.0 unx     4496 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/orqdantic/orqdantic.py
 -rw-r--r--  2.0 unx      471 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/packaging/__init__.py
 -rw-r--r--  2.0 unx     2235 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/packaging/_versions.py
 -rw-r--r--  2.0 unx      274 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/schema/__init__.py
 -rw-r--r--  2.0 unx     1472 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/schema/_compat.py
 -rw-r--r--  2.0 unx     1625 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/schema/configs.py
--rw-r--r--  2.0 unx    15413 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/schema/ir.py
+-rw-r--r--  2.0 unx    15503 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/schema/ir.py
 -rw-r--r--  2.0 unx     2132 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/schema/responses.py
 -rw-r--r--  2.0 unx     2955 b- defN 20-Feb-02 00:00 orquestra/sdk/_shared/schema/workflow_run.py
 -rw-r--r--  2.0 unx      377 b- defN 20-Feb-02 00:00 orquestra/sdk/dremio/__init__.py
 -rw-r--r--  2.0 unx      204 b- defN 20-Feb-02 00:00 orquestra/sdk/examples/__init__.py
 -rw-r--r--  2.0 unx     1572 b- defN 20-Feb-02 00:00 orquestra/sdk/examples/exportable_wf.py
 -rw-r--r--  2.0 unx     1075 b- defN 20-Feb-02 00:00 orquestra/sdk/examples/workflow_defs.py
 -rw-r--r--  2.0 unx      299 b- defN 20-Feb-02 00:00 orquestra/sdk/kubernetes/__init__.py
@@ -126,13 +126,13 @@
 -rw-r--r--  2.0 unx      437 b- defN 20-Feb-02 00:00 orquestra/sdk/packaging/__init__.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Feb-02 00:00 orquestra/sdk/schema/__init__.py
 -rw-r--r--  2.0 unx      662 b- defN 20-Feb-02 00:00 orquestra/sdk/schema/configs.py
 -rw-r--r--  2.0 unx     1789 b- defN 20-Feb-02 00:00 orquestra/sdk/schema/ir.py
 -rw-r--r--  2.0 unx      734 b- defN 20-Feb-02 00:00 orquestra/sdk/schema/responses.py
 -rw-r--r--  2.0 unx      781 b- defN 20-Feb-02 00:00 orquestra/sdk/schema/workflow_run.py
 -rw-r--r--  2.0 unx      428 b- defN 20-Feb-02 00:00 orquestra/sdk/secrets/__init__.py
-?rw-r--r--  2.0 unx    18219 b- defN 20-Feb-02 00:00 orquestra_sdk-0.63.0.dist-info/METADATA
-?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 orquestra_sdk-0.63.0.dist-info/WHEEL
-?rw-r--r--  2.0 unx       68 b- defN 20-Feb-02 00:00 orquestra_sdk-0.63.0.dist-info/entry_points.txt
-?rw-r--r--  2.0 unx    11357 b- defN 20-Feb-02 00:00 orquestra_sdk-0.63.0.dist-info/licenses/LICENSE
-?rw-r--r--  2.0 unx    13253 b- defN 20-Feb-02 00:00 orquestra_sdk-0.63.0.dist-info/RECORD
-136 files, 784800 bytes uncompressed, 215950 bytes compressed:  72.5%
+?rw-r--r--  2.0 unx    18219 b- defN 20-Feb-02 00:00 orquestra_sdk-0.64.0.dist-info/METADATA
+?rw-r--r--  2.0 unx       87 b- defN 20-Feb-02 00:00 orquestra_sdk-0.64.0.dist-info/WHEEL
+?rw-r--r--  2.0 unx       68 b- defN 20-Feb-02 00:00 orquestra_sdk-0.64.0.dist-info/entry_points.txt
+?rw-r--r--  2.0 unx    11357 b- defN 20-Feb-02 00:00 orquestra_sdk-0.64.0.dist-info/licenses/LICENSE
+?rw-r--r--  2.0 unx    13247 b- defN 20-Feb-02 00:00 orquestra_sdk-0.64.0.dist-info/RECORD
+136 files, 788550 bytes uncompressed, 216556 bytes compressed:  72.5%
```

## zipnote {}

```diff
@@ -33,17 +33,14 @@
 
 Filename: orquestra/sdk/_client/_base/_in_process_runtime.py
 Comment: 
 
 Filename: orquestra/sdk/_client/_base/_jwt.py
 Comment: 
 
-Filename: orquestra/sdk/_client/_base/_retry.py
-Comment: 
-
 Filename: orquestra/sdk/_client/_base/_services.py
 Comment: 
 
 Filename: orquestra/sdk/_client/_base/_traversal.py
 Comment: 
 
 Filename: orquestra/sdk/_client/_base/_viz.py
@@ -267,14 +264,17 @@
 
 Filename: orquestra/sdk/_shared/_graphs.py
 Comment: 
 
 Filename: orquestra/sdk/_shared/_regex.py
 Comment: 
 
+Filename: orquestra/sdk/_shared/_retry.py
+Comment: 
+
 Filename: orquestra/sdk/_shared/abc.py
 Comment: 
 
 Filename: orquestra/sdk/_shared/dispatch.py
 Comment: 
 
 Filename: orquestra/sdk/_shared/exceptions.py
@@ -387,23 +387,23 @@
 
 Filename: orquestra/sdk/schema/workflow_run.py
 Comment: 
 
 Filename: orquestra/sdk/secrets/__init__.py
 Comment: 
 
-Filename: orquestra_sdk-0.63.0.dist-info/METADATA
+Filename: orquestra_sdk-0.64.0.dist-info/METADATA
 Comment: 
 
-Filename: orquestra_sdk-0.63.0.dist-info/WHEEL
+Filename: orquestra_sdk-0.64.0.dist-info/WHEEL
 Comment: 
 
-Filename: orquestra_sdk-0.63.0.dist-info/entry_points.txt
+Filename: orquestra_sdk-0.64.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: orquestra_sdk-0.63.0.dist-info/licenses/LICENSE
+Filename: orquestra_sdk-0.64.0.dist-info/licenses/LICENSE
 Comment: 
 
-Filename: orquestra_sdk-0.63.0.dist-info/RECORD
+Filename: orquestra_sdk-0.64.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## orquestra/sdk/_client/_base/_dsl.py

```diff
@@ -129,14 +129,16 @@
     Please use a helper, such as GithubImport, instead of this class.
     """
 
     repo_url: str
     git_ref: str
     username: Optional[str]
     auth_secret: Optional[Secret]
+    package_name: Optional[str] = None
+    extras: Optional[Tuple[str, ...]] = None
 
 
 @dataclass(frozen=True, eq=True)
 class GitImport:
     """A task import that uses a Git repository."""
 
     repo_url: str
@@ -162,24 +164,31 @@
 
 
 def GithubImport(
     repo: str,
     git_ref: str = "main",
     username: Optional[str] = None,
     personal_access_token: Optional[Secret] = None,
+    package_name: Optional[str] = None,
+    extras: Optional[Union[List[str], str]] = None,
 ):
     """Helper to create GitImports from Github repos.
 
     Args:
         repo: The name of the repo from which to import.
         git_ref: the reference to be imported
             (see https://docs.github.com/en/rest/git/refs for details).
         username: the username used to access GitHub
         personal_access_token: must be configured in GitHub for access to the specified
             repo.
+        package_name: package name that will be used during pip install. Example:
+            my_package @ git+https://github.com/my_repo@main
+        extras: name of extra (or list of name of extras) to be installed from repo. Ex:
+            my_package[extra] @ git+https://github.com/my_repo@main
+            Due to pip restrictions, passing extras require package name to be passed
 
     Raises:
         TypeError: when a value that is not a `sdk.Secret` is passed as
             `personal_access_token`.
     """
     if personal_access_token is not None and not isinstance(
         personal_access_token, Secret
@@ -203,20 +212,34 @@
     if personal_access_token is not None and isinstance(personal_access_token, Secret):
         if personal_access_token.workspace_id is None:
             warnings.warn(
                 "Please specify workspace ID directly for accessing secrets."
                 " Support for default workspaces will be sunset in the future.",
                 FutureWarning,
             )
+    if extras is not None and package_name is None:
+        raise TypeError(
+            "Due to PIP syntax restrictions, passing extras require" " package name."
+        )
+
+    _extras: Optional[Tuple[str, ...]]
+    if extras is None:
+        _extras = None
+    elif isinstance(extras, str):
+        _extras = (extras,)
+    else:
+        _extras = tuple(extras)
 
     return GitImportWithAuth(
         repo_url=f"https://github.com/{repo}.git",
         git_ref=git_ref,
         username=username,
         auth_secret=personal_access_token,
+        extras=_extras,
+        package_name=package_name,
     )
 
 
 class DeferredGitImport:
     def __init__(
         self, local_repo_path: Union[str, os.PathLike], git_ref: Optional[str] = None
     ):
```

## orquestra/sdk/_client/_base/_traversal.py

```diff
@@ -1,9 +1,9 @@
 ################################################################################
-# © Copyright 2022-2023 Zapata Computing Inc.
+# © Copyright 2022-2024 Zapata Computing Inc.
 ################################################################################
 """Transforms a DSL-based workflow into Intermediate Representation format.
 
 The main highlight is `flatten_graph()`.
 """
 
 import collections.abc
@@ -413,14 +413,16 @@
                 secret_config=imp.auth_secret.config_name,
                 workspace_id=imp.auth_secret.workspace_id,
             )
         return ir.GitImport(
             id=id_,
             repo_url=url,
             git_ref=imp.git_ref,
+            package_name=imp.package_name,
+            extras=imp.extras,
         )
     elif isinstance(imp, _dsl.InlineImport):
         return ir.InlineImport(id=id_)
 
     elif isinstance(imp, _dsl.PythonImports):
         reqs: t.List[Requirement] = imp.resolved()
         deps = []
```

## orquestra/sdk/_client/_base/_workflow.py

```diff
@@ -243,14 +243,65 @@
             data_aggregation=self._data_aggregation,
             workflow_args=self._workflow_args,
             workflow_kwargs=self._workflow_kwargs,
             default_source_import=self.default_source_import,
             default_dependency_imports=self.default_dependency_imports,
         )
 
+    def with_head_node_resources(
+        self,
+        *,
+        cpu: Optional[Union[str, _dsl.Sentinel]] = _dsl.Sentinel.NO_UPDATE,
+        memory: Optional[Union[str, _dsl.Sentinel]] = _dsl.Sentinel.NO_UPDATE,
+        disk: Optional[Union[str, _dsl.Sentinel]] = _dsl.Sentinel.NO_UPDATE,
+    ) -> "WorkflowDef":
+        """Assigns optional metadata related to this workflow definition object.
+
+        Doesn't modify the existing workflow definition, returns a new one.
+
+        Example usage::
+
+            wf_run = my_workflow().with_head_node_resources(
+                cpu="10", memory="10Gi"
+            ).run("my_cluster")
+
+        Args:
+            cpu: amount of cpu requested for the head node
+            memory: amount of memory requested for the head node
+            disk: amount of disk requested for the head node
+        """
+        # Only use the new properties if they have not been changed.
+        # None is a valid option, so we are using the Sentinel object pattern:
+        # https://python-patterns.guide/python/sentinel-object/
+
+        resources = (
+            self._data_aggregation.resources
+            if self._data_aggregation
+            else _dsl.Resources()
+        )
+
+        new_resources = _dsl.Resources(
+            cpu=resources.cpu if cpu is _dsl.Sentinel.NO_UPDATE else cpu,
+            memory=resources.memory if memory is _dsl.Sentinel.NO_UPDATE else memory,
+            disk=resources.disk if disk is _dsl.Sentinel.NO_UPDATE else disk,
+        )
+
+        new_data_aggregation = _dsl.DataAggregation(resources=new_resources)
+        return WorkflowDef(
+            name=self._name,
+            workflow_fn=self._fn,
+            fn_ref=self._fn_ref,
+            resources=self._resources,
+            data_aggregation=new_data_aggregation,
+            workflow_args=self._workflow_args,
+            workflow_kwargs=self._workflow_kwargs,
+            default_source_import=self.default_source_import,
+            default_dependency_imports=self.default_dependency_imports,
+        )
+
 
 class WorkflowTemplate(Generic[_P, _R]):
     """Result of applying the `@workflow` decorator to a function."""
 
     def __init__(
         self,
         custom_name: Optional[str],
```

## orquestra/sdk/_client/_base/_driver/_ce_runtime.py

```diff
@@ -3,15 +3,22 @@
 ################################################################################
 """RuntimeInterface implementation that uses Compute Engine."""
 import warnings
 from datetime import timedelta
 from pathlib import Path
 from typing import Dict, List, Optional, Protocol, Sequence, Union
 
-from orquestra.sdk._shared import Project, ProjectRef, Workspace, exceptions, serde
+from orquestra.sdk._shared import (
+    Project,
+    ProjectRef,
+    Workspace,
+    exceptions,
+    retry,
+    serde,
+)
 from orquestra.sdk._shared.abc import RuntimeInterface
 from orquestra.sdk._shared.exceptions import IgnoredFieldWarning
 from orquestra.sdk._shared.kubernetes.quantity import parse_quantity
 from orquestra.sdk._shared.logs import (
     LogAccumulator,
     LogOutput,
     LogStreamType,
@@ -35,15 +42,14 @@
     WorkflowRun,
     WorkflowRunId,
     WorkflowRunMinimal,
     WorkflowRunSummary,
     WorkspaceId,
 )
 
-from ..._base import _retry
 from . import _client, _exceptions, _models
 
 
 class PaginatedListFunc(Protocol):
     """Protocol for functions passed to CERuntime._list_wf_runs()."""
 
     def __call__(
@@ -260,15 +266,15 @@
         except (_exceptions.InvalidTokenError, _exceptions.ForbiddenError) as e:
             raise exceptions.UnauthorizedError(
                 "Could not get the workflow status for run with id "
                 f"`{workflow_run_id}` "
                 "- the authorization token was rejected by the remote cluster."
             ) from e
 
-    @_retry.retry(
+    @retry(
         attempts=5,
         delay=0.2,
         allowed_exceptions=(exceptions.WorkflowResultsNotReadyError,),
     )
     def get_workflow_run_outputs_non_blocking(
         self, workflow_run_id: WorkflowRunId
     ) -> Sequence[WorkflowResult]:
```

## orquestra/sdk/_runtime/_ray/_build_workflow.py

```diff
@@ -392,15 +392,22 @@
     # Short circuit the Git import otherwise
     if os.getenv(RAY_DOWNLOAD_GIT_IMPORTS_ENV) != "1":
         return []
     protocol = imp.repo_url.protocol
     if not protocol.startswith("git+"):
         protocol = f"git+{protocol}"
     url = _build_git_url(imp.repo_url, protocol)
-    return [f"{url}@{imp.git_ref}"]
+
+    url_string = f"{url}@{imp.git_ref}"
+    extras_string = "" if imp.extras is None else f"[{','.join(imp.extras)}]"
+    package_name_string = (
+        "" if imp.package_name is None else f"{imp.package_name}{extras_string} @ "
+    )
+
+    return [f"{package_name_string}{url_string}"]
 
 
 def _import_pip_env(
     ir_invocation: ir.TaskInvocation,
     wf: ir.WorkflowDef,
     imports_pip_string: t.Dict[ir.ImportId, t.List[str]],
 ) -> t.List[str]:
```

## orquestra/sdk/_runtime/_ray/_client.py

```diff
@@ -1,13 +1,14 @@
 ################################################################################
 # © Copyright 2022-2023 Zapata Computing Inc.
 ################################################################################
 """Facade module for Ray API."""
 import typing as t
 
+from orquestra.sdk._shared import retry
 from orquestra.sdk._shared.exceptions import (
     NotFoundError,
     UserTaskFailedError,
     WorkflowRunNotFoundError,
 )
 
 try:
@@ -82,14 +83,18 @@
                 ignore_reinit_error=True,
                 configure_logging=configure_logging,
             )
 
         def shutdown(self):
             ray.shutdown()
 
+        # Ray seems to have a race condition in its code while getting
+        # the task artifact.
+        # https://github.com/ray-project/ray/issues/45027
+        @retry(attempts=20, allowed_exceptions=(exceptions.RaySystemError,), delay=0.5)
         def get(
             self,
             obj_refs: t.Union[ray.ObjectRef, t.List[ray.ObjectRef]],
             timeout: t.Optional[float] = None,
         ):
             try:
                 return ray.get(obj_refs, timeout=timeout)
```

## orquestra/sdk/_shared/__init__.py

```diff
@@ -1,12 +1,14 @@
 from ._graphs import iter_invocations_topologically
 from ._regex import SEMVER_REGEX, VERSION_REGEX
+from ._retry import retry
 from ._spaces import Project, ProjectRef, Workspace
 
 __all__ = [
     "VERSION_REGEX",
     "Project",
     "ProjectRef",
     "Workspace",
     "SEMVER_REGEX",
     "iter_invocations_topologically",
+    "retry",
 ]
```

## orquestra/sdk/_shared/schema/ir.py

```diff
@@ -50,14 +50,16 @@
     query: t.Optional[str] = None
 
 
 class GitImport(BaseModel):
     id: ImportId
     repo_url: GitURL
     git_ref: str
+    package_name: t.Optional[str] = None
+    extras: t.Optional[t.Tuple[str, ...]] = None
 
     # we need this in the JSON to know which class to use when deserializing
     type: t.Literal["GIT_IMPORT"] = "GIT_IMPORT"
 
     @field_validator("repo_url", mode="before")
     def _backwards_compatible_repo_url(cls, v):
         """Allows older models with a string URL to be imported."""
```

## Comparing `orquestra/sdk/_client/_base/_retry.py` & `orquestra/sdk/_shared/_retry.py`

 * *Files identical despite different names*

## Comparing `orquestra_sdk-0.63.0.dist-info/METADATA` & `orquestra_sdk-0.64.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.3
 Name: orquestra-sdk
-Version: 0.63.0
+Version: 0.64.0
 Summary: Compose Orquestra workflows using a Python DSL
 Project-URL: Homepage, https://github.com/zapata-engineering/orquestra-sdk
 Project-URL: Documentation, https://docs.orquestra.io
 Project-URL: Repository, https://github.com/zapata-engineering/orquestra-sdk.git
 Project-URL: Issues, https://github.com/zapata-engineering/orquestra-sdk/issues
 Author-email: "Zapata Computing Inc." <info@zapatacomputing.com>
 License:                                  Apache License
```

## Comparing `orquestra_sdk-0.63.0.dist-info/licenses/LICENSE` & `orquestra_sdk-0.64.0.dist-info/licenses/LICENSE`

 * *Files identical despite different names*

## Comparing `orquestra_sdk-0.63.0.dist-info/RECORD` & `orquestra_sdk-0.64.0.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,32 +1,31 @@
 orquestra/sdk/__init__.py,sha256=qH9RWXNBw3ifMHOjMjwPOs_y-llG1up82nxvdv6tg48,2051
 orquestra/sdk/exceptions.py,sha256=frsC0mzgj5XFf8qmtAMhW07wo1Z6f2XSm31_WLgMMLE,2892
 orquestra/sdk/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 orquestra/sdk/_client/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 orquestra/sdk/_client/_base/__init__.py,sha256=w3lKi4G8NQ88XMU5vXiUdq-vpO0RLzNE91LrXiZ_gj8,204
 orquestra/sdk/_client/_base/_ast.py,sha256=BfZodrVyM4FdF3LUEwo4Os4DMbjAhAz_gdbSTaRfB9k,8110
 orquestra/sdk/_client/_base/_config.py,sha256=BQQfXnv2JqqkQFu2j8zaf2onjjQR7oFudcVYe4Gl3Xg,16525
-orquestra/sdk/_client/_base/_dsl.py,sha256=d-ZIpS2wspvglS-5qqMv7_wN6ucjN9xICi6zX4bIURI,47276
+orquestra/sdk/_client/_base/_dsl.py,sha256=GQ1GmXa04jpET6_2qcMd4vHawC7JrjqTTB-9XjLKaZU,48260
 orquestra/sdk/_client/_base/_env.py,sha256=p7kv7h5SoeuCv96ytFfcQxRoKLVkP57Naw_rsfoSW_g,2414
 orquestra/sdk/_client/_base/_factory.py,sha256=tmPGMyg_y4XFSUR7tpi6QQIUCukn1RFbvVYT_08Up68,2683
 orquestra/sdk/_client/_base/_git_url_utils.py,sha256=EQHBtH3uHmIRO2u7jQikKUomNLJmZJ3dnNyZTKaaMtc,2085
 orquestra/sdk/_client/_base/_in_process_runtime.py,sha256=TmdWffo8HsA2QLxiKaVxZEe1RARP2t9ma9BwUXk2RYY,14448
 orquestra/sdk/_client/_base/_jwt.py,sha256=THXmIRxghS0aIMxSGzureamkR90KuvWjPGPGDX5vf4Q,1504
-orquestra/sdk/_client/_base/_retry.py,sha256=zRYVUAAtpzV_w-tv3AuKPL2xYmoPb50VoIc-Q2qzLEo,1404
 orquestra/sdk/_client/_base/_services.py,sha256=L0u1j-_bjzRNr13h3YeW0oWEIHXHqDyImrCNxRCLDEg,3678
-orquestra/sdk/_client/_base/_traversal.py,sha256=zM8Um8kHIAytE6MlmkpThBTQory_CrFXDyVQZKq3-dU,32711
+orquestra/sdk/_client/_base/_traversal.py,sha256=28YAsCXoIv-gfoP1O-ZdVeUL6AedqTUHJzBG0pKwZTk,32785
 orquestra/sdk/_client/_base/_viz.py,sha256=72uA449MB5UWxnvV2J_Sfd8DgQnDVPUkvMHErAzdAQg,4616
-orquestra/sdk/_client/_base/_workflow.py,sha256=j1avRb2NyHGWvTRHyXv_ZoTcywFXHAMAqlnzMArXcbA,24596
+orquestra/sdk/_client/_base/_workflow.py,sha256=6gpCW65SjLCs359bfCb5FjIZv6PpvggfMpdvVTZStgc,26626
 orquestra/sdk/_client/_base/loader.py,sha256=UgQkRyiMJzUk6r9Oe8RPNSWQ2H0WUd6mhVxBnsFSXj8,6188
 orquestra/sdk/_client/_base/_api/__init__.py,sha256=sNUm7b_TrMbQg6Ir0qOFU5cLc1MGU328i2kmRbp-JmE,878
 orquestra/sdk/_client/_base/_api/_config.py,sha256=rCPrwkKPtUQOHABNKFJBbhEVGntvsXfYu_LCAnXIaCU,14647
 orquestra/sdk/_client/_base/_api/_task_run.py,sha256=fA3U3BDm5ALJYWFT3e6Wjeqb7biFgf9NYfHwgJqFG4M,12987
 orquestra/sdk/_client/_base/_api/_wf_run.py,sha256=4VEEq7yMxdFY4AcbgjlMNG_qvlb4VLlFG0g3asvK9ks,34562
 orquestra/sdk/_client/_base/_driver/__init__.py,sha256=w3lKi4G8NQ88XMU5vXiUdq-vpO0RLzNE91LrXiZ_gj8,204
-orquestra/sdk/_client/_base/_driver/_ce_runtime.py,sha256=BQq6c-bJ83QOFTG_onHQV3-uyWX9aEARFJDH2Q9eElE,30007
+orquestra/sdk/_client/_base/_driver/_ce_runtime.py,sha256=W4f3KmQpPh9V9nC-v5sIj2D6TB0w4D68iubdTd-dsR8,30008
 orquestra/sdk/_client/_base/_driver/_client.py,sha256=OpDyfo8l4FXmqOWp_qZu6epN2uuMJPtOmKnVXubuwKI,51919
 orquestra/sdk/_client/_base/_driver/_exceptions.py,sha256=eX2Cd_rIYwgmX0-0AtmIbpAgFw0WbcN7PtfGDX0UmZM,6062
 orquestra/sdk/_client/_base/_driver/_models.py,sha256=i7lhU01dqpn7OklDhG1JRM9998GR2t8iQIVBR4QcM0A,17720
 orquestra/sdk/_client/_base/_spaces/__init__.py,sha256=w3lKi4G8NQ88XMU5vXiUdq-vpO0RLzNE91LrXiZ_gj8,204
 orquestra/sdk/_client/_base/_spaces/_api.py,sha256=4_diOrGdk6qvh6exuoDGxkbjs9yUSEAeymGfCgPLGlE,2786
 orquestra/sdk/_client/_base/_spaces/_resolver.py,sha256=4vk_ugh2YjccVU-jB3yWYm2tCn2uwyzQ5iMc-v5LNYs,2385
 orquestra/sdk/_client/_base/_testing/__init__.py,sha256=w3lKi4G8NQ88XMU5vXiUdq-vpO0RLzNE91LrXiZ_gj8,204
@@ -72,27 +71,28 @@
 orquestra/sdk/_client/secrets/_client.py,sha256=vJoDUeXaLgPclfwYyGFNYHVgx18rNRUN8Wi4DOxGNr8,8350
 orquestra/sdk/_client/secrets/_exceptions.py,sha256=I8Hgize2RV39k5mLxSU-FeHWQpZWThP_t6IjgQ95Fl8,1249
 orquestra/sdk/_client/secrets/_models.py,sha256=8SSFTzZvIxV3QGZQm6fUdX6smos8cZeC4kwj1fASvN4,1782
 orquestra/sdk/_ray/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 orquestra/sdk/_ray/_build_workflow.py,sha256=n2EYOF6Rf3aiDKGRa8ps5DeS8nOvuPLD7WAQeOvSDu4,436
 orquestra/sdk/_runtime/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 orquestra/sdk/_runtime/_ray/__init__.py,sha256=w3lKi4G8NQ88XMU5vXiUdq-vpO0RLzNE91LrXiZ_gj8,204
-orquestra/sdk/_runtime/_ray/_build_workflow.py,sha256=-W0rV6P5oKLMlHIumekfHbNEWJCFkEZ0gum-U22bPyI,27980
-orquestra/sdk/_runtime/_ray/_client.py,sha256=cAVDrd9JCPukFae6qPhPAuZH49lZPOxb-oeza9Siedo,8263
+orquestra/sdk/_runtime/_ray/_build_workflow.py,sha256=eps3ILBUh_7bV9A-zm-Q9hoWmEpsvCgpbsj2PNZRxWI,28232
+orquestra/sdk/_runtime/_ray/_client.py,sha256=tZiA_tX0osNN5FuKnNSUcGPOmReekjJGG-CkSLCyZoY,8549
 orquestra/sdk/_runtime/_ray/_dag.py,sha256=D8EUTc0iPkHqs9_R59gZLiFgq72oheQT3ycRQOPFAEk,30785
 orquestra/sdk/_runtime/_ray/_dirs.py,sha256=xnspdMQ1I3ASqG3Cqu2-SqzfoyKPQprSpd0T9cye_Ck,1458
 orquestra/sdk/_runtime/_ray/_env.py,sha256=KhgAH5_Jj2GMGAjlCZFoXxoKfCs7JX3wBwxQMiD6_Jc,1096
 orquestra/sdk/_runtime/_ray/_id_gen.py,sha256=59hPSI9DB6DacE-uwtKnbjX1B10mj3MM_Cq6PIujY8k,946
 orquestra/sdk/_runtime/_ray/_ray_logs.py,sha256=o4OB4bqHU5QAh6OsozeG3wT5JQd6kXkHVXenVOZNkG8,9463
 orquestra/sdk/_runtime/_ray/_wf_metadata.py,sha256=Van24shCuMxSO41UI7DIcuTjWOQDBHfMtCjg-nfScCo,1517
 orquestra/sdk/_runtime/_ray/_logs/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 orquestra/sdk/_runtime/_ray/_logs/_markers.py,sha256=zhAfwLp96o2V5W1WJxWmYiKWvvhVBD2LW6aRIuqhmoc,7022
-orquestra/sdk/_shared/__init__.py,sha256=o8IgsthEGiSq-d5tuASBemTHWUWsgGJ1wXkLXKkSo7Q,296
+orquestra/sdk/_shared/__init__.py,sha256=Nxk3XmUyH__LEldmoZ4MiOPy4wIm-CQt9Jm6JLu3dK8,335
 orquestra/sdk/_shared/_graphs.py,sha256=ktjG4TZoaoE9wB9ZyZErdIZISszCOFObEsWPTwsCzPA,3845
 orquestra/sdk/_shared/_regex.py,sha256=lPsAFfR4b-PWfuzXiyTfw0y3F3lTXv4MUDIyClbAFUI,1144
+orquestra/sdk/_shared/_retry.py,sha256=zRYVUAAtpzV_w-tv3AuKPL2xYmoPb50VoIc-Q2qzLEo,1404
 orquestra/sdk/_shared/abc.py,sha256=waTvOSQTJTSTwVNfepksi3oFpmrTQMLrtjRV15lp0ME,8454
 orquestra/sdk/_shared/dispatch.py,sha256=7F4Sdt92vI8VcRR5527v1NSkZR7ON7ZEi7ujeWQcyUo,4796
 orquestra/sdk/_shared/exceptions.py,sha256=OKMwgrNi2xyyCetm4hrqxi9jXLhR0s_Dy0oglYw9eGo,10212
 orquestra/sdk/_shared/serde.py,sha256=8SaUdwKZho5UaIGVBkWeThE4ijKhDsp4skLOm5pWhiU,7012
 orquestra/sdk/_shared/_spaces/__init__.py,sha256=9t1wPEP28Sfc5FTmV3oLGA92SR_zaEKZ-o3odF7ZBvs,103
 orquestra/sdk/_shared/_spaces/_structs.py,sha256=ajI3LZikCMlelY9QlBRa6lS6PQ7xrmh0mldmWsCG1Qk,692
 orquestra/sdk/_shared/dates/__init__.py,sha256=Ersfejdnwix-jjfyjdGstiD0dR0ToLT_hzWfwzKGYnA,355
@@ -108,15 +108,15 @@
 orquestra/sdk/_shared/orqdantic/__init__.py,sha256=OsoXm3KCXMwrh99mpDYeMzIQLJy61uHZ2-YVp2-_tHs,383
 orquestra/sdk/_shared/orqdantic/orqdantic.py,sha256=KjTtgvlCHASTeNZS3v-eRSDjo3XeQZYpZCOGwzomU2g,4496
 orquestra/sdk/_shared/packaging/__init__.py,sha256=DTwWXAbo6sm6LHp3Eok5bJY3xR6zvy_bwP3KTtoUNw4,471
 orquestra/sdk/_shared/packaging/_versions.py,sha256=smAH_q0SvhxzVezajuiIjul-mR2e8Uxj3dei7zQzwCg,2235
 orquestra/sdk/_shared/schema/__init__.py,sha256=qN06lUfOlkge70om7y4xhU6mab8xWwoQ_KeFDRbiJf0,274
 orquestra/sdk/_shared/schema/_compat.py,sha256=ojx9IuATi_UdJZt8v4ykdHezflLkQI2p-Y1fbKVlXQw,1472
 orquestra/sdk/_shared/schema/configs.py,sha256=qkhj1bC67O7N5LTTJni9_UPevMAyQPWY9YaL5JUn9uI,1625
-orquestra/sdk/_shared/schema/ir.py,sha256=-LDDxE-fUuxpjPpWhxZcO79S6gu4mcptIQ0QdeV95GA,15413
+orquestra/sdk/_shared/schema/ir.py,sha256=e427SX_muoV9mbMTa98XWvTxicwJUhbyO2izgnH6QUI,15503
 orquestra/sdk/_shared/schema/responses.py,sha256=7IVPJnc5oI5vkgwjhi0yBzJ293eFqJmqjDtegVIntI8,2132
 orquestra/sdk/_shared/schema/workflow_run.py,sha256=IoJtkLBMS18tRRZmtTZfuNSeG9fWfuZN10EwUvDvxNI,2955
 orquestra/sdk/dremio/__init__.py,sha256=tEnZs6Y7f1aWL4Ko5cVAB_CJ_GQVIBVm4qQRkg0mUYA,377
 orquestra/sdk/examples/__init__.py,sha256=w3lKi4G8NQ88XMU5vXiUdq-vpO0RLzNE91LrXiZ_gj8,204
 orquestra/sdk/examples/exportable_wf.py,sha256=EHBMTYNA7ObhgneENIrCc4L53KX6mu_bgfG47Itml5I,1572
 orquestra/sdk/examples/workflow_defs.py,sha256=tmAPpDVM7-6szg_6RznA7fOO7UtqDcLR2iosMkjIflA,1075
 orquestra/sdk/kubernetes/__init__.py,sha256=BpPilSHEJmzI3TSO8mQFxH_WIn3dkOirKX9JarAUlTc,299
@@ -125,12 +125,12 @@
 orquestra/sdk/packaging/__init__.py,sha256=s5xoqyimHakNRDPRcCyQKpx5LuxO_T9dFQPsddejeLI,437
 orquestra/sdk/schema/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 orquestra/sdk/schema/configs.py,sha256=DONS9o22YueTQr-3zX72kAyj2sZ-6Hay4eF5x9xREIw,662
 orquestra/sdk/schema/ir.py,sha256=n0iNUNq6X72DU9Qz9SSBrz0ROENFq6jvAGZScJQIvbg,1789
 orquestra/sdk/schema/responses.py,sha256=cq_KiV6DMBf2wOV9b3yG9ZL4R82YXyxzZVqf-eDcgt0,734
 orquestra/sdk/schema/workflow_run.py,sha256=Pjqa0LCDFG9trvoVInELnbURcNSzVUusslBaIMNJ-Xo,781
 orquestra/sdk/secrets/__init__.py,sha256=tgr2HkD76wjw7otzzUNez6Kqzi0l0pg2SLq61Xwm97o,428
-orquestra_sdk-0.63.0.dist-info/METADATA,sha256=4v2kiVNg5LH3WVOAhBQ_tJcVdBlhlt9nw6r9shRs1jQ,18219
-orquestra_sdk-0.63.0.dist-info/WHEEL,sha256=zEMcRr9Kr03x1ozGwg5v9NQBKn3kndp6LSoSlVg-jhU,87
-orquestra_sdk-0.63.0.dist-info/entry_points.txt,sha256=E8c4YlwLSpc905O9vnW6yzkCaguwaffTkbN3jWUimpw,68
-orquestra_sdk-0.63.0.dist-info/licenses/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-orquestra_sdk-0.63.0.dist-info/RECORD,,
+orquestra_sdk-0.64.0.dist-info/METADATA,sha256=3wvM-EXGQX0byD-s8JnzLL7xUHlcJwVE4BhdRzgZtLs,18219
+orquestra_sdk-0.64.0.dist-info/WHEEL,sha256=zEMcRr9Kr03x1ozGwg5v9NQBKn3kndp6LSoSlVg-jhU,87
+orquestra_sdk-0.64.0.dist-info/entry_points.txt,sha256=E8c4YlwLSpc905O9vnW6yzkCaguwaffTkbN3jWUimpw,68
+orquestra_sdk-0.64.0.dist-info/licenses/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+orquestra_sdk-0.64.0.dist-info/RECORD,,
```


# Comparing `tmp/ip_check-1.6.0-py3-none-any.whl.zip` & `tmp/ip_check-1.6.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,32 +1,32 @@
-Zip file size: 38829 bytes, number of entries: 30
+Zip file size: 39049 bytes, number of entries: 30
 -rw-rw-r--  2.0 unx      383 b- defN 24-Mar-19 08:00 ipcheck/__init__.py
 -rw-rw-r--  2.0 unx     6208 b- defN 24-Apr-11 01:20 ipcheck/geoinfo.py
--rw-rw-r--  2.0 unx    10913 b- defN 24-May-07 01:46 ipcheck/main.py
+-rw-rw-r--  2.0 unx    11221 b- defN 24-May-15 01:47 ipcheck/main.py
 -rw-rw-r--  2.0 unx        0 b- defN 24-Mar-14 08:04 ipcheck/app/__init__.py
 -rw-rw-r--  2.0 unx      726 b- defN 24-Mar-14 08:04 ipcheck/app/base_config.py
 -rw-rw-r--  2.0 unx      462 b- defN 24-Apr-11 06:34 ipcheck/app/common_config.py
--rw-rw-r--  2.0 unx     6182 b- defN 24-Apr-12 06:34 ipcheck/app/config.py
+-rw-rw-r--  2.0 unx     6214 b- defN 24-May-15 01:43 ipcheck/app/config.py
 -rw-rw-r--  2.0 unx     1773 b- defN 24-Mar-19 08:00 ipcheck/app/default_config.py
--rw-rw-r--  2.0 unx     2193 b- defN 24-Apr-11 01:20 ipcheck/app/gen_ip_utils.py
+-rw-rw-r--  2.0 unx     2669 b- defN 24-May-15 01:57 ipcheck/app/gen_ip_utils.py
 -rw-rw-r--  2.0 unx     2078 b- defN 24-Apr-11 06:34 ipcheck/app/ip_info.py
 -rw-rw-r--  2.0 unx     2546 b- defN 24-Mar-14 08:04 ipcheck/app/rtt_test.py
 -rw-rw-r--  2.0 unx      223 b- defN 24-Mar-14 08:04 ipcheck/app/rtt_test_config.py
 -rw-rw-r--  2.0 unx     5656 b- defN 24-Apr-09 08:53 ipcheck/app/speed_test.py
 -rw-rw-r--  2.0 unx      223 b- defN 24-Mar-14 08:04 ipcheck/app/speed_test_config.py
--rw-rw-r--  2.0 unx     3350 b- defN 24-May-07 01:52 ipcheck/app/utils.py
+-rw-rw-r--  2.0 unx     3350 b- defN 24-May-07 02:00 ipcheck/app/utils.py
 -rw-rw-r--  2.0 unx     3765 b- defN 24-Apr-11 01:20 ipcheck/app/valid_test.py
 -rw-rw-r--  2.0 unx      362 b- defN 24-Apr-09 08:53 ipcheck/app/valid_test_config.py
 -rw-rw-r--  2.0 unx        0 b- defN 24-Apr-09 08:53 ipcheck/app/ipparser/__init__.py
--rw-rw-r--  2.0 unx     1058 b- defN 24-Apr-12 07:35 ipcheck/app/ipparser/base_parser.py
+-rw-rw-r--  2.0 unx     1058 b- defN 24-May-07 02:00 ipcheck/app/ipparser/base_parser.py
 -rw-rw-r--  2.0 unx      673 b- defN 24-Apr-11 01:20 ipcheck/app/ipparser/ip_cidr_parser.py
 -rw-rw-r--  2.0 unx      835 b- defN 24-Apr-11 01:20 ipcheck/app/ipparser/ip_dir_parser.py
 -rw-rw-r--  2.0 unx     1138 b- defN 24-Apr-12 07:02 ipcheck/app/ipparser/ip_file_parser.py
 -rw-rw-r--  2.0 unx      526 b- defN 24-Apr-11 01:20 ipcheck/app/ipparser/ip_parser.py
--rw-rw-r--  2.0 unx     1370 b- defN 24-May-07 01:52 ipcheck/app/ipparser/ip_port_parser.py
--rw-rw-r--  2.0 unx    35148 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/LICENSE
--rw-rw-r--  2.0 unx     6361 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/WHEEL
--rw-r--r--  2.0 unx      201 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        8 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2508 b- defN 24-May-07 01:58 ip_check-1.6.0.dist-info/RECORD
-30 files, 96961 bytes uncompressed, 34785 bytes compressed:  64.1%
+-rw-rw-r--  2.0 unx     1370 b- defN 24-May-07 02:00 ipcheck/app/ipparser/ip_port_parser.py
+-rw-rw-r--  2.0 unx    35148 b- defN 24-May-15 02:13 ip_check-1.6.1.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     6637 b- defN 24-May-15 02:13 ip_check-1.6.1.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 24-May-15 02:13 ip_check-1.6.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx      201 b- defN 24-May-15 02:13 ip_check-1.6.1.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        8 b- defN 24-May-15 02:13 ip_check-1.6.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2508 b- defN 24-May-15 02:13 ip_check-1.6.1.dist-info/RECORD
+30 files, 98053 bytes uncompressed, 35005 bytes compressed:  64.3%
```

## zipnote {}

```diff
@@ -66,26 +66,26 @@
 
 Filename: ipcheck/app/ipparser/ip_parser.py
 Comment: 
 
 Filename: ipcheck/app/ipparser/ip_port_parser.py
 Comment: 
 
-Filename: ip_check-1.6.0.dist-info/LICENSE
+Filename: ip_check-1.6.1.dist-info/LICENSE
 Comment: 
 
-Filename: ip_check-1.6.0.dist-info/METADATA
+Filename: ip_check-1.6.1.dist-info/METADATA
 Comment: 
 
-Filename: ip_check-1.6.0.dist-info/WHEEL
+Filename: ip_check-1.6.1.dist-info/WHEEL
 Comment: 
 
-Filename: ip_check-1.6.0.dist-info/entry_points.txt
+Filename: ip_check-1.6.1.dist-info/entry_points.txt
 Comment: 
 
-Filename: ip_check-1.6.0.dist-info/top_level.txt
+Filename: ip_check-1.6.1.dist-info/top_level.txt
 Comment: 
 
-Filename: ip_check-1.6.0.dist-info/RECORD
+Filename: ip_check-1.6.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ipcheck/main.py

```diff
@@ -34,14 +34,15 @@
 
 # 从手动参数中覆盖默认config
 def load_config():
     parser = argparse.ArgumentParser(description='ip-check 参数')
     parser.add_argument("-w", "--white_list", type=parse_list, default=None, help='偏好ip参数, 格式为: "expr1,expr2", 如"8,9" 会筛选8和9开头的ip')
     parser.add_argument("-b", "--block_list", type=parse_list, default=None, help='屏蔽ip参数, 格式为: "expr1,expr2", 如"8,9" 会过滤8和9开头的ip')
     parser.add_argument("-pl", "--prefer_locs", type=parse_list, default=None, help='偏好国家地区选择, 格式为: "expr1,expr2", 如"hongkong,japan" 会筛选HongKong 和Japan 地区的ip')
+    parser.add_argument("-po", "--prefer_orgs", type=parse_list, default=None, help='偏好org 选择, 格式为: "expr1,expr2", 如"org1,org2" 会筛选org1, org2 的服务商ip')
     parser.add_argument("-pp", "--prefer_ports", type=parse_port, default=None, help='针对ip:port 格式的测试源筛选端口, 格式为: "expr1,expr2", 如"443,8443" 会筛选出443 和8443 端口的ip')
     parser.add_argument("-lv", "--max_vt_ip_count", type=int, default=0, help="最大用来检测有效(valid) ip数量限制,0表示使用config.ini中的配置")
     parser.add_argument("-lr", "--max_rt_ip_count", type=int, default=0, help="最大用来检测rtt ip数量限制,0表示使用config.ini中的配置")
     parser.add_argument("-ls", "--max_st_ip_count", type=int, default=0, help="最大用来检测下载(speed) 速度的ip数量限制,0表示使用config.ini中的配置")
     parser.add_argument("-p", "--port", type=int, default=0, help="用来检测的端口")
     parser.add_argument("-H", "--host", type=str, default=None, help="可用性域名")
     parser.add_argument("-dr", "--disable_rt", action="store_true", default=False, help="是否禁用RTT 测试")
@@ -85,14 +86,17 @@
         config.white_list = white_list
     if block_list:
         print('黑名单参数为:', block_list)
         config.block_list = block_list
     config.prefer_locs = args.prefer_locs
     if config.prefer_locs:
         print('优选地区参数为:', config.prefer_locs)
+    config.prefer_orgs = args.prefer_orgs
+    if config.prefer_orgs:
+        print('优选org 参数为:', config.prefer_orgs)
     config.prefer_ports = args.prefer_ports
     if config.prefer_ports:
         print('ip:port 测试源端口为:', config.prefer_ports)
     if args.disable_vt:
         print('可用性检测已关闭')
         config.vt_enabled = False
     if args.disable_rt:
```

## ipcheck/app/config.py

```diff
@@ -44,14 +44,15 @@
         self.ip_source = None
         self.out_file = None
         self.verbose = None
         self.white_list = None
         self.block_list = None
         self.prefer_locs = None
         self.prefer_ports = None
+        self.prefer_orgs = None
 
         # 可用性valid test测试选项
         # 是否测试可用性
         self.vt_enabled = True
         # 限制参与valid 测试的ip 数量
         self.vt_ip_limit_count = 1500
         # 可用性检测域名
```

## ipcheck/app/gen_ip_utils.py

```diff
@@ -23,14 +23,16 @@
             break
     config = Config()
     if config.white_list:
         ip_list = filter_ip_list_by_white_list(ip_list, config.white_list)
     if config.block_list:
         ip_list = filter_ip_list_by_block_list(ip_list, config.block_list)
     ip_list = get_geo_info(ip_list)
+    if config.prefer_orgs:
+        ip_list = filter_ip_list_by_orgs(ip_list, config.prefer_orgs)
     if config.prefer_locs:
         ip_list = filter_ip_list_by_locs(ip_list, config.prefer_locs)
     return ip_list
 
 def filter_ip_list_by_white_list(ip_list: List[IpInfo], white_list):
     fixed_list = []
     for ip_info in ip_list:
@@ -55,8 +57,17 @@
 def filter_ip_list_by_locs(ip_list: List[IpInfo], prefer_locs: List[str]):
     fixed_list = []
     for ip_info in ip_list:
         for loc in prefer_locs:
             if loc.upper().replace('_', '').replace(' ', '') in ip_info.country_city.upper().replace('_', ''):
                 fixed_list.append(ip_info)
                 break
+    return fixed_list
+
+def filter_ip_list_by_orgs(ip_list: List[IpInfo], prefer_orgs: List[str]):
+    fixed_list = []
+    for ip_info in ip_list:
+        for org in prefer_orgs:
+            if org.upper().replace('_', '').replace(' ', '').replace('-', '') in ip_info.org.upper().replace('_', '').replace('-', ''):
+                fixed_list.append(ip_info)
+                break
     return fixed_list
```

## Comparing `ip_check-1.6.0.dist-info/LICENSE` & `ip_check-1.6.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `ip_check-1.6.0.dist-info/METADATA` & `ip_check-1.6.1.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ip-check
-Version: 1.6.0
+Version: 1.6.1
 Summary: Powerful cdn network speed test utils.
 Author: nobitaqaq
 Author-email: xiaoleigs@gmail.com
 Keywords: cdn,speed test,network speed
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
@@ -44,14 +44,16 @@
   -h, --help            show this help message and exit
   -w WHITE_LIST, --white_list WHITE_LIST
                         偏好ip参数, 格式为: "expr1,expr2", 如"8,9" 会筛选8和9开头的ip
   -b BLOCK_LIST, --block_list BLOCK_LIST
                         屏蔽ip参数, 格式为: "expr1,expr2", 如"8,9" 会过滤8和9开头的ip
   -pl PREFER_LOCS, --prefer_locs PREFER_LOCS
                         偏好国家地区选择, 格式为: "expr1,expr2", 如"hongkong,japan" 会筛选HongKong 和Japan 地区的ip
+  -po PREFER_ORGS, --prefer_orgs PREFER_ORGS
+                        偏好org 选择, 格式为: "expr1,expr2", 如"org1,org2" 会筛选org1, org2 的服务商ip
   -pp PREFER_PORTS, --prefer_ports PREFER_PORTS
                         针对ip:port 格式的测试源筛选端口, 格式为: "expr1,expr2", 如"443,8443" 会筛选出443 和8443 端口的ip
   -lv MAX_VT_IP_COUNT, --max_vt_ip_count MAX_VT_IP_COUNT
                         最大用来检测有效(valid) ip数量限制,0表示使用config.ini中的配置
   -lr MAX_RT_IP_COUNT, --max_rt_ip_count MAX_RT_IP_COUNT
                         最大用来检测rtt ip数量限制,0表示使用config.ini中的配置
   -ls MAX_ST_IP_COUNT, --max_st_ip_count MAX_ST_IP_COUNT
@@ -184,28 +186,26 @@
 
 optional arguments:
   -h, --help  show this help message and exit
 ```
 
 ## Release Note
 
+- V1.6.1
+  - 增加按org（运营商）筛选ip 策略
+- V1.6.0
+  - 修复-pp 传唱为非合法端口导致的异常
 - V1.5.9
   - 针对多端口测试源增加通过端口筛选测试源的策略
-
 - V1.5.8
   - 修复rtt 测试中丢包率控制失效问题
-
 - V1.5.7
   - 增加按地区优选ip 策略
   - 修复黑白名单不支持多分组策略
-
 - V1.5.6
   - 黑白名单过滤优化
-
 - V1.5.4
   - 修正带路径分隔符输出文件名异常的bug
-
 - V1.5.3
   - 把ip 输入源解析重构，方便以后拓展
-
 - V1.5.2
   - ip 传递参数新增ip:port 格式
```

## Comparing `ip_check-1.6.0.dist-info/RECORD` & `ip_check-1.6.1.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 ipcheck/__init__.py,sha256=mjRHWAo73u50fxwseCRsTdvj9pPNZuTmsKW8Qpj-cNk,383
 ipcheck/geoinfo.py,sha256=SF6jmsKEMj7MMqfPn70LoJvqm4wy8SC0bpcSZuWfcfo,6208
-ipcheck/main.py,sha256=3nDuBLiZSn6NBdlV21d20m7YgUlhQGChAFngQRltNkQ,10913
+ipcheck/main.py,sha256=7XrEDfnObAieeGYVXqHe6ppMYihCgY9jkbp0CG7itVw,11221
 ipcheck/app/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ipcheck/app/base_config.py,sha256=PxNW4PXHagvULNc9FgDwMtu7aCn91RYx2SqBYd4-nd4,726
 ipcheck/app/common_config.py,sha256=mCaZ6Hc46WQZFuaWSf2wY8s6ux0V7e7nPyomrp0jW6k,462
-ipcheck/app/config.py,sha256=lKVVqljrGmG7z5T_iq0zEtaZLee-dSJzRnLo85kAHhI,6182
+ipcheck/app/config.py,sha256=wRsAi-tUZeTy_wgCuN4BBnwbRszmZ_uoS1XpJ1KKRTo,6214
 ipcheck/app/default_config.py,sha256=7OP6pibA78-xkmVGZ4kLsmWzV8fKRff8bCXd9sceFPU,1773
-ipcheck/app/gen_ip_utils.py,sha256=OSDu-OIwydyBrBn3bcH7CyDo0q1b_wMEdGQvWmBVmCc,2193
+ipcheck/app/gen_ip_utils.py,sha256=zoxvv-VnJyzH8zHPJW9FBdIESUxSOScNOY6zuRKHNOc,2669
 ipcheck/app/ip_info.py,sha256=AzAUCV_wY8lgQOAce10AT8NtLPAnFxWr3-IcS5oWXo4,2078
 ipcheck/app/rtt_test.py,sha256=d1_iC3OFeqBAFqqHBdRN_IH5jlRgtd5USn0vV0_CM8M,2546
 ipcheck/app/rtt_test_config.py,sha256=PK7M7uLst4Zi3v2DgKA8rfpZsXIRnwfTxYa12bPDeb8,223
 ipcheck/app/speed_test.py,sha256=LKolSAPbkIkDrfJyW5fVHlMzWuGXaPOckat6S8kqebY,5656
 ipcheck/app/speed_test_config.py,sha256=Ji1jUEqSjAIqkzUzeE1BBHPfoJ2E-JeG36DJiHJ3CYA,223
 ipcheck/app/utils.py,sha256=ExFjmLywBzUXu3SBttL_d4-oYf4uWzjWn2fsdmSbJvE,3350
 ipcheck/app/valid_test.py,sha256=BIrC1P8_B1fATRzueWRRaQPWFmuFcPT_uDXOEfLuJzs,3765
@@ -18,13 +18,13 @@
 ipcheck/app/ipparser/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ipcheck/app/ipparser/base_parser.py,sha256=kIbAKAPV9fE6g2cHj9HQAgDhGPQ6nbE5kGdYLa9Y_1Y,1058
 ipcheck/app/ipparser/ip_cidr_parser.py,sha256=N1z0YycVvizUBRpuvvgQ5YjPv5VPA3npQZfEOawGTzE,673
 ipcheck/app/ipparser/ip_dir_parser.py,sha256=KZnmBh5JArVVuumb9WoIt-iYp6LAYeqbOmmFVUFaop8,835
 ipcheck/app/ipparser/ip_file_parser.py,sha256=HFt7gPZz5miGtX5TGoT5GuJTOagdSCA5TJuNeiV60Xg,1138
 ipcheck/app/ipparser/ip_parser.py,sha256=gE5mLxEMzoEkMKn9n_QIalIrkGCbw9tm9XdKbOtnZWs,526
 ipcheck/app/ipparser/ip_port_parser.py,sha256=y29ReVN7APo5ohHXKYnKQYvjtHqUrj81wEREvwYGP8M,1370
-ip_check-1.6.0.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
-ip_check-1.6.0.dist-info/METADATA,sha256=MoJynzWQxaWvtnIClZTTSy8BUxLwItvDwmGj8wOGwAg,6361
-ip_check-1.6.0.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-ip_check-1.6.0.dist-info/entry_points.txt,sha256=LbstGY5z6sejWLCwyd9pTq4qRdfCsligLhJHjwp-Pd0,201
-ip_check-1.6.0.dist-info/top_level.txt,sha256=24binHFMOV_-4WIWZrtgRz4y7uY3vUxlJBq2UXMMfvY,8
-ip_check-1.6.0.dist-info/RECORD,,
+ip_check-1.6.1.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
+ip_check-1.6.1.dist-info/METADATA,sha256=tp7l64vpRgHBEbQs_3Z77IuVXR6mwsOY-5q5QK8cfRQ,6637
+ip_check-1.6.1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+ip_check-1.6.1.dist-info/entry_points.txt,sha256=LbstGY5z6sejWLCwyd9pTq4qRdfCsligLhJHjwp-Pd0,201
+ip_check-1.6.1.dist-info/top_level.txt,sha256=24binHFMOV_-4WIWZrtgRz4y7uY3vUxlJBq2UXMMfvY,8
+ip_check-1.6.1.dist-info/RECORD,,
```

